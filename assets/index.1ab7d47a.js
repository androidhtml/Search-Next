var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,i=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&s(e,a,t[a]);if(n)for(var a of n(t))l.call(t,a)&&s(e,a,t[a]);return e},o=(e,n)=>t(e,a(n)),c=("undefined"!=typeof require&&require,(e,t)=>{var a={};for(var s in e)r.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&n)for(var s of n(e))t.indexOf(s)<0&&l.call(e,s)&&(a[s]=e[s]);return a}),m=(e,t,a)=>(s(e,"symbol"!=typeof t?t+"":t,a),a);import{R as u,C as d,a as h,K as p,A as f,b as E,d as g,D as y,I as v,c as b,u as x,e as w,f as k,g as N,h as C,i as S,j as _,B as O,k as j,H as $,l as z,m as I,n as T,o as D,T as K,p as P,q,r as L,s as M,t as F,v as A,w as Y,x as J,E as R,y as V,z as H,F as W,G as B,J as U,M as G,L as Q,N as X,O as Z,P as ee,S as te,Q as ae,U as ne,V as re,W as le,X as se,Y as ie,Z as oe,_ as ce,$ as me,a0 as ue,a1 as de,a2 as he,a3 as pe}from"./vendor.05a31967.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const fe=()=>u.createElement("div",{id:"loading"},u.createElement("div",{className:"pic"},[1,2,3,4,5].map((e=>u.createElement("i",{key:e}))))),Ee={},ge=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`/${e}`)in Ee)return;Ee[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise(((e,t)=>{n.addEventListener("load",e),n.addEventListener("error",t)})):void 0}))).then((()=>e())):e()},ye=e=>{var t=e,{title:a,desc:n,icon:r,onClick:l,action:s}=t;c(t,["title","desc","icon","onClick","action"]);const i=u.createElement(h,{className:"px-4 py-3"},u.createElement("div",{className:"flex"},u.createElement("div",{className:"flex-grow flex items-center justify-start"},r&&u.createElement("div",{className:"mr-1"},r),u.createElement("div",null,u.createElement("p",{className:"text-sm mb-0"},a),n&&u.createElement("p",{className:"text-xs mb-0 text-gray-700"},n))),u.createElement("div",{className:"flex items-center"},s||u.createElement(p,{fontSize:"small"}))));return u.createElement("div",{className:"bg-white rounded border hover:bg-gray-100 transition"},s?i:u.createElement(d,{onClick:()=>l?l():null},i))},ve=({pChildren:e,children:t,location:a})=>e&&e.find((e=>e.key===a.pathname))?u.createElement(u.Fragment,null,e):t,be=({account:e})=>{var t;return u.createElement("div",{className:"flex py-4 pl-0 items-center"},u.createElement("div",{className:"mr-4"},u.createElement(f,{sx:{width:64,height:64}},null==(t=e.username)?void 0:t.split("")[0].toLocaleUpperCase())),u.createElement("div",null,u.createElement("div",{className:"text-lg font-bold leading-7 mb-0"},e.username,u.createElement(E,{className:"ml-2",size:"small",color:"info",label:"local"===e.type?"本地账户":"注册账户"})),u.createElement("div",{className:"text-sm mt-1 mb-0"},"创建时间: ",g(e.createdTime).format("YYYY-MM-DD HH:mm"))))},xe=["$eq","$gt","$gte","$in","$lt","$lte","$ne","$nin"],we=e=>"number"!=typeof e,ke={$eq:(e,t)=>t===e,$gt:(e,t)=>{if(we(e))throw new Error("'$gt' value must be a number");return t>e},$gte:(e,t)=>{if(we(e))throw new Error("'$gte' value must be a number");return t>=e},$in:(e,t)=>{if(!(e instanceof Array))throw new Error("'$in' value must be an array");return e.includes(t)},$lt:(e,t)=>{if(we(e))throw new Error("'$lt' value must be a number");return t<e},$lte:(e,t)=>{if(we(e))throw new Error("'$lte' value must be a number");return t<=e},$ne:(e,t)=>t!==e,$nin:(e,t)=>{if(!(e instanceof Array))throw new Error("'$nin' value must be an array");return!e.includes(t)},_checkExist:e=>{if(xe.includes(e))return!0;throw new Error("unknown operator: '"+e+"'")}},Ne=(e,t)=>{var a,n,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),l=[];if(t=t||r.length,e)for(a=0;a<e;a++)l[a]=r[0|Math.random()*t];else for(l[8]=l[13]=l[18]=l[23]="-",l[14]="4",a=0;a<36;a++)l[a]||(n=0|16*Math.random(),l[a]=r[19==a?3&n|8:n]);return l.join("")},Ce=e=>e instanceof Object&&"Object"===e.constructor.name,Se=e=>e instanceof Array&&"Array"===e.constructor.name,_e=(e,t)=>{if(!e||!Object.keys(e).length)return!0;for(let a of Object.keys(e)){let n=e[a],r=t[a];if(n instanceof RegExp){if(!n.test(r))return!1}else if(Ce(n)){for(let e of Object.keys(n))if(ke._checkExist(e)&&!ke[e](n[e],r))return!1}else if(n!==r)return!1}return!0},Oe=(e,t,a,n,r)=>{n=n||0;let l=(r=r||Object.keys(e))[n];return l?t[l]===a[l]?(n++,Oe(e,t,a,n,r)):1===e[l]?t[l]-a[l]:-1===e[l]?a[l]-t[l]:void 0:0};class je{constructor(e,t,a){m(this,"name"),m(this,"storage"),m(this,"cache"),m(this,"path"),m(this,"cacheable"),m(this,"primaryKey"),a=a||{},this.name=t,this.storage=e.storage,this.path=e.database+e.sep+t,this.primaryKey=a.primaryKey||e.primaryKey,this.cache=[],this.cacheable=!1}_initCache(){let e=[],t=new RegExp("^"+this.path);for(let a of Object.keys(this.storage))t.test(a)&&(e=JSON.parse(this.storage.getItem(a)));this.cache=e,this.cacheable=!0}_filter(e,t){t.type=t.type||"data",t.multi=t.multi||!1,this.cacheable||this._initCache();let a,n=[],r="id"===t.type;if("string"==typeof e)e=new RegExp(e);else if("function"==typeof e)a=!0;else if(!e){let e=r?Object.keys(this.cache):Object.values(this.cache);return t.multi?e:e[0]||null}for(let l of Object.keys(this.cache)){let s=this.cache[Number(l)];if(a){if(e(l,s)){let e=r?l:s;if(!t.multi)return e;n.push(e)}}else if(e.test(s[this.primaryKey])){let e=r?l:s;if(!t.multi)return e;n.push(e)}}return t.multi?n:null}inset(e,t){var a;let n=Se(e),r=Ce(e);if(n){if(0===e.length)return[]}else e=[e];let l=this.primaryKey,s=this.cacheable,i=JSON.parse(this.storage.getItem(this.path)||"[]");for(let o of e){if(!r&&!n)throw new Error("TypeError: insert data must be an object or an object array");void 0!==o[l]&&0!==(null==(a=o[l])?void 0:a.length)||(o[l]=Ne()),o.createdTime||(o.createdTime=new Date,o.updatedTime=""),s&&(this.cache=i.concat(o)),this.storage.setItem(this.path,JSON.stringify(i.concat(o)))}return n?e:e[0]}find(e,t){let a;e=e||{},(t=t||{}).skip=t.skip||0,t.limit=t.limit,t.sort=t.sort,Se(t.sort)&&(t.sort=t.sort.reduce(((e,t)=>("string"==typeof t?e[t]=1:t instanceof Array&&t.length&&(e[t[0]]=t[1]||1),e)),{}));let n=Ce(e)?null:Se(e)?e:[e],r={type:t._filterType||"data",multi:!0};if(n){let e=new RegExp("^"+n.join("|")+"$");a=this._filter(e,r)}else a=Object.keys(e).length?this._filter(((t,a)=>_e(e,a)),r):this._filter(null,r);return t.sort&&a.sort(((e,a)=>Oe(null==t?void 0:t.sort,e,a))),t.limit?a=a.slice(t.skip,t.skip+t.limit):t.skip&&(a=a.slice(t.skip)),a}findOne(e,t){let a;t=t||{};let n=Ce(e=e||{})?null:e,r=e?Object.keys(e):[],l=!1,s=!!t.sort,i={type:t._filterType||"data",multi:!1};if(r.length&&r.includes(this.primaryKey)&&(n=e[this.primaryKey],l=!0),n){if(a=this.storage.getItem(this.path),a=a?JSON.parse(a):null,a&&l&&!_e(e,a))return null;a=a?a.find((e=>e[this.primaryKey]===n)):void 0}else a=r.length?s?this.find(e,t):this._filter(((t,a)=>_e(e,a)),i):s?this.find(e,t):this._filter(null,i);return!n&&s&&a&&(a=a[0]||null),a}remove(e,t){if(!e)throw new Error("remove needs a query");(t=t||{}).multi=void 0===t.multi||t.multi;let a=JSON.parse(this.storage.getItem(this.path)),n=t.multi?this.find(e,{_filterType:"data"}):this.findOne(e,{_filterType:"data"}),r=this.cacheable;if(t.mulit&&!n.length||!t.mulit&&!n)return 0;t.multi||(n=[n]);for(let l of n)r&&(this.cache=this.cache.filter((e=>e[this.primaryKey]!==l[this.primaryKey]))),a=a.filter((e=>e[this.primaryKey]!==l[this.primaryKey])),this.storage.setItem(this.path,JSON.stringify(a));return n.length}update(e,t,a){if(!e)throw new Error("update needs a query");if(!t||!Ce(t))throw new Error("update needs an object");(a=a||{}).multi=void 0!==a.multi&&a.multi;let n=this.primaryKey,r=this.cacheable;t[n]&&delete t[n];let l=a.multi?this.find(e,{_filterType:(null==a?void 0:a._filterType)||"data"}):this.findOne(e,{_filterType:(null==a?void 0:a._filterType)||"data"});if(a.mulit&&!l.length||!a.mulit&&!l)return 0;if(a.multi){delete t[n];let e=l,a=JSON.parse(this.storage.getItem(this.path));return a?(a=a.map((a=>(e.forEach((e=>{if(a[n]===e[n])for(let n in t)a[n]=t[n],a.updatedTime=new Date})),a))),r&&(this.cache=a),this.storage.setItem(this.path,JSON.stringify(a)),l.length):null}{let e=l,a=JSON.parse(this.storage.getItem(this.path));return a?(a=a.map((a=>{if(a[n]===e[n])for(let e in t)a[e]=t[e],a.updatedTime=new Date;return a})),this.storage.setItem(this.path,JSON.stringify(a)),r&&(this.cache=a),a):null}}drop(){return this.remove({}),!0}count(){let e=this.storage.getItem(this.path);return e?JSON.parse(e).length:void 0}}class $e{constructor(e){m(this,"storage"),m(this,"database"),m(this,"primaryKey"),m(this,"sep"),this.storage=e.storage||window&&window.localStorage,this.database=e.database||"db",this.primaryKey=e.primaryKey||"_id",this.sep=e.sep||":",(e=>{if(!(e&&e instanceof Object))return!1;try{return e.setItem("_supported","1"),e.removeItem("_supported"),!0}catch(t){return!1}})(this.storage)||(this.storage=null)}get(e,t){return new je(this,e,t||{storage:this.storage,database:this.database,primaryKey:this.primaryKey,sep:this.sep})}collection(e,t){return this.get(e,t)}size(){let e=0;for(let t in this.storage)if(this.storage.hasOwnProperty(t)&&-1!==t.indexOf(this.database+":")){const a=this.storage.getItem(t);e+=a?a.length:0}return e}}const ze=new $e({storage:localStorage,database:"database"}).get("auth"),Ie=e=>ze.findOne(e),Te=(e,t)=>ze.update(e,t),De=e=>ze.inset(e),Ke={username:"默认账户",avatar:"",type:"local",language:"zh-CN",background:{type:"color"},sync:{setting:!1,website:!1,history:!1}},Pe=()=>{const e=De(Ke);return localStorage.setItem("account",e._id),e},qe=()=>{const e=localStorage.getItem("account");if(e){const t=Ie(e);return t||Pe()}return Pe()},Le=({title:e,desc:t,rightHandle:a})=>u.createElement("div",{className:"py-2"},u.createElement("div",{className:"font-semibold flex items-center justify-between"},u.createElement("p",{className:"mb-0"},e),a),t&&u.createElement("p",{className:"mt-1 mb-0 text-sm text-gray-800"},t));const Me=()=>u.createElement(u.Fragment,null,u.createElement(S,{className:"MuiDialog-confirm-icon-info"})),Fe=e=>{const t=e,{open:a,title:n,content:r,type:l,onClose:s,okText:o,cancelText:m,onOk:d,onCancel:h}=t,p=c(t,["open","title","content","type","onClose","okText","cancelText","onOk","onCancel"]),f=x(),E=w(f.breakpoints.down("sm"));return u.createElement(k,i({className:"MuiDialog-confirm",open:a,onClose:h,fullScreen:E},p),u.createElement(Ye,{onClose:h},n),u.createElement(N,null,u.createElement(C,null,(()=>{const e={info:Me(),success:u.createElement(u.Fragment,null,u.createElement(j,{className:"MuiDialog-confirm-icon-success"})),error:u.createElement(u.Fragment,null,u.createElement($,{className:"MuiDialog-confirm-icon-error"})),warning:u.createElement(u.Fragment,null,u.createElement(z,{className:"MuiDialog-confirm-icon-warning"}))};return l?e[l]:Me()})(),r)),u.createElement(_,null,u.createElement(O,{size:"small",disableElevation:!0,variant:"contained",onClick:h},m||"Cancel"),u.createElement(O,{size:"small",disableElevation:!0,variant:"contained",color:"primary",onClick:d},o||"Ok")))};var Ae=new class{constructor(){m(this,"dom")}confirm(e){const{title:t,content:a,type:n="info",okText:r,cancelText:l,onOk:s,onCancel:i}=e;this.dom=document.createElement("div");const o=u.createElement(Fe,{open:!0,container:this.dom,title:t,content:a,type:n,okText:r,cancelText:l,onOk:()=>this.onOk(s),onCancel:()=>this.onCancel(i)});I.render(o,this.dom),document.body.append(this.dom)}onCancel(e){e instanceof Function&&e(),this.close()}onOk(e){e instanceof Function&&e(),this.close()}close(){var e;null==(e=this.dom)||e.setAttribute("style","opacity:0;transition: opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;"),setTimeout((()=>{this.dom&&this.dom.remove()}),226)}};const Ye=e=>{var t=e,{onClose:a,children:n}=t,r=c(t,["onClose","children"]);return u.createElement(y,i({},r),n,a?u.createElement(v,{className:"absolute right-3 top-3","aria-label":"close",onClick:a,size:"small"},u.createElement(b,null)):null)},Je=Ae;let Re=e=>{const{id:t,form:a,size:n,children:r}=e,[l,s]=u.useState([]);return u.useEffect((()=>{if(r instanceof Object&&!r.length)s([u.cloneElement(r,{control:a.control,size:n,key:"form-item"})]);else{if(!(r instanceof Array&&r.length))throw new Error("Children must be object or array");s(r.map(((e,t)=>u.createElement(u.Fragment,{key:t},u.cloneElement(e,{control:a.control,size:n,key:t})))))}}),[r]),u.createElement("form",{id:t,style:{overflow:"hidden"}},l)};Re.useForm=D,Re.Item=e=>{const{name:t,children:a,size:n,rules:r,defaultValue:l="",label:s,control:m}=e;return u.createElement("div",{style:{padding:"6px 0"}},u.createElement(T,{name:t,control:m,rules:r,defaultValue:l,render:e=>{var t=e,{field:r}=t,l=r,{onChange:m}=l,d=c(l,["onChange"]),{fieldState:{error:h}}=t;return u.cloneElement(a,o(i({onChange:e=>{a.props.onChange&&a.props.onChange(e),m(e)},label:s,size:n},d),{error:!!h,helperText:h?h.message:""}))}}))};var Ve="0.1",He={startTime:"2018",href:"https://search.virs.xyz",author:"Vir"};const We=e=>/^((ht|f)tps?:\/\/)/.test(e)?e:`https://${e}`,Be=e=>{let t=(e=>e.replace(/^((ht|f)tps?:\/\/)/,""))(e||"");return e?`http://statics.dnspod.cn/proxy_favicon/_/favicon?domain=${t}`:""},Ue=()=>{const[e,t]=u.useState({}),a=g(new Date).format("YYYY"),n=()=>{(()=>{const e=i({version:Ve},He);return new Promise((t=>{t({code:200,msg:"获取成功",data:e})}))})().then((e=>{t(e.data)}))};return u.useEffect((()=>{n()}),[]),u.createElement("a",{className:"copyright text-sm text-gray-300 hover:text-gray-800 font-mono",href:e.href},"©",e.startTime,"-",a," by ",e.author,". All rights reserved.")},Ge=({title:e,action:t,disabledRightPadding:a=!1})=>u.createElement("div",{className:"flex justify-between items-center border-t px-4 py-2"},u.createElement("div",null,e),u.createElement("div",{className:F({"mr-8":!a})},t)),Qe=({title:e,desc:t,action:a,expanded:n,onChange:r,children:l,disableDetailPadding:s=!1})=>u.createElement(Y,{expanded:n,onChange:r,className:"rounded border shadow-none bg-white my-0"},u.createElement(J,{className:" transition hover:bg-gray-100",expandIcon:u.createElement(R,null)},u.createElement("div",{className:"flex items-center justify-between w-full mr-2"},u.createElement("div",null,e&&u.createElement("p",{className:"mb-0 text-sm font-semibold"},e),t&&u.createElement("p",{className:"mb-0 text-xs"},t)),u.createElement("div",{className:"flex items-center"},a))),u.createElement(V,{className:F({"p-0":s})},l)),Xe=({open:e,title:t,value:a,onOk:n,onCancel:r})=>{const{Item:l}=Re,s=Re.useForm(),{handleSubmit:i,reset:o,setValue:c}=s;return u.useEffect((()=>{e&&a&&c("username",a.username),e||c("username","")}),[e]),u.createElement(k,{open:e,onClose:r},u.createElement(Ye,{onClose:r},t||"修改账户名称"),u.createElement(N,null,u.createElement(Re,{form:s,size:"small"},u.createElement(l,{name:"username",label:"账户名称",rules:{required:{value:!0,message:"请输入账户名称"}}},u.createElement(K,{variant:"outlined",placeholder:"请输入账户名称"})))),u.createElement(_,null,u.createElement(O,{disableElevation:!0,variant:"outlined",onClick:()=>{r()}},"取消"),u.createElement(O,{disableElevation:!0,variant:"contained",color:"primary",type:"submit",onClick:()=>{i(n,(e=>{console.log(e)}))()}},"确认")))},Ze=H.create({baseURL:"http://api.virs.xyz",timeout:1e4,validateStatus:e=>e>=200&&e<=500});Ze.interceptors.request.use((e=>(e.headers={},e)),(e=>{const t=e.response;return null==t||t.status,Promise.reject(e)})),Ze.interceptors.response.use((e=>e),(e=>Promise.reject(e)));const et=new $e({storage:localStorage,database:"database"}).get("background"),tt=()=>Ze.get("/v1/resource/bing/latest"),at=({data:e})=>{const[t,a]=u.useState([0,0]),[n,r]=u.useState(0),[l,s]=u.useState({}),i=u.useRef(null),o=u.useCallback((()=>{const e=(()=>{const e=window.innerWidth,t=window.innerHeight,a=(e,t)=>e%t==0?t:a(t,e%t),n=a(e,t);return[e/n,t/n]})(),t=(i.current?i.current.clientWidth:384)/e[0]*e[1];a(e),r(t)}),[]);return u.useEffect((()=>(o(),window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)})),[]),u.useEffect((()=>{"everyday"===e.type?tt().then((t=>{s({type:e.type,data:t.data.data[0]})})):s(e)}),[e]),u.createElement("div",{className:"grid grid-cols-2 gap-8"},u.createElement("div",{ref:i,className:"rounded border my-2 bg-cover bg-center flex flex-col items-center justify-center",style:{height:`${n}px`,background:l.data?`url(${l.data.url})`:void 0}},u.createElement("div",{className:"rounded h-5 w-48 mb-6 flex justify-end overflow-hidden"},u.createElement("div",{className:"flex-grow h5 border bg-white rounded-l"}),u.createElement("div",{className:"bg-primary h-5 w-9 border border-primary"}))),u.createElement("div",null))},nt=({value:e,label:t,size:a="medium",options:n,optionsConfig:r,onChange:l})=>u.createElement(W,{sx:{minWidth:120}},u.createElement(B,{fullWidth:!0},u.createElement(U,{id:`mui-select-label-${t}`},t),u.createElement(G,{labelId:`mui-select-label-${t}`,id:`mui-select-${t}`,value:e,label:t,size:a,onChange:l,onClose:e=>e.stopPropagation()},n.map((e=>{const t=r&&r.label?e[r.label]:e.label,a=r&&r.value?e[r.value]:e.value;return u.createElement(Q,{key:a,value:a},t)}))))),rt=({data:e})=>{const[t,a]=u.useState("");return u.useEffect((()=>{e&&(null==e?void 0:e.url)&&a(null==e?void 0:e.url)}),[e]),u.createElement("div",null,u.createElement(X,{severity:"info"},"每天更新背景，来源：必应壁纸"),t&&u.createElement("div",{className:F("m-2 rounded overflow-hidden",Z`
              .ant-image {
                display: block;
              }
            `)},u.createElement(ee,{src:t})))},lt=/(http|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?/,st=e=>lt.test(e),it=e=>{const{onChange:t,data:a}=e,[n,r]=u.useState(""),[l,s]=u.useState(!1),[i,o]=u.useState(!1);return u.useEffect((()=>{console.log(a),r(a?a.url:""),o(!0),s(!0)}),[a]),u.createElement("div",null,u.createElement(Ge,{title:"在线图片地址",action:u.createElement(K,{size:"small",label:"链接",value:n,placeholder:"请输入图片链接",onFocus:()=>s(!1),onChange:e=>{o(!1),r(e.target.value)},onBlur:e=>{s(!0);const a=st(n);!a&&n.length>0&&(P.error("请输入有效的链接"),o(!1)),a&&n.length>0&&(o(!0),t(n))}})}),n&&l&&i&&u.createElement("div",{className:F("m-2 rounded overflow-hidden",Z`
              .ant-image {
                display: block;
              }
            `)},u.createElement(ee,{src:n})))},ot=({label:e,id:t,value:a,tip:n,disabled:r=!1,loading:l=!1,children:s,onChange:i})=>{const[o,c]=u.useState(t===a);u.useEffect((()=>{a&&c(a===t)}),[a]),u.useEffect((()=>{o&&i&&t&&i(t)}),[o]);const m=()=>u.createElement("input",{className:F("rounded w-full cursor-pointer h-full m-0 p-0 z-10 overflow-hidden absolute appearance-none bg-transparent transition-all border",!l&&o?"border-primary shadow-inner":"border-gray-200 shadow-sm"),type:"radio",id:t,name:a,checked:o,onChange:()=>{},onClick:()=>c(!0),disabled:r});return u.createElement("div",{className:"p-0 mb-0 h-full transition-all rounded"},u.createElement("div",{className:"inline-block relative min-w-min min-h-full items-stretch justify-start h-full"},n?u.createElement(q,{title:n},m()):m(),u.createElement("label",{slot:"label",htmlFor:t,className:"inline-block p-0 text-sm leading-5 text-primary"},u.createElement("div",{className:"px-2 pt-2 pb-1"},u.createElement("div",{className:"border border-gray-300 rounded"},l?u.createElement(te,{variant:"rectangular",width:136,height:76}):s),e&&u.createElement("div",null,u.createElement("label",{className:"mt-1 overflow-hidden max-w-full whitespace-nowrap overflow-ellipsis text-xs leading-4 inline-block p-0 text-primary"},l?u.createElement(te,{variant:"text",width:100,height:16}):e))))))},ct=({data:e,onChange:t})=>{const[a,n]=u.useState([]),[r,l]=u.useState([]),[s,o]=u.useState(""),[c,m]=u.useState(!1),[d,h]=u.useState(!1),p=e=>({id:e._id,url:e.url,hsh:e.hsh,copyright:e.copyright,copyrightlink:e.copyrightlink}),f=()=>{m(!0);const a=E();var r;(r={size:10,hsh:a},Ze.get("/v1/resource/bing/random",{params:r})).then((a=>{let r=a.data.data;n(r),l(r.map((()=>!0))),m(!1);const s=r[0];e?o(e.hsh):(t&&t(p(s)),o(s.hsh))}))},E=()=>{let t="";return e&&(t=e.hsh),o(t),t},y=e=>{if(!d)return h(!0);const t=localStorage.getItem("account"),n=a.find((t=>t.hsh===e));n&&t&&((e,t)=>{let a;t&&(t.userId=e,a=et.inset(t));let n=t?{_id:{$ne:a._id}}:{};et.update(i({userId:{$eq:e},check:{$eq:!0}},n),{check:!1},{multi:!0})})(t,{check:!0,url:n.url,bgId:n._id,hsh:n.hsh,copyright:n.copyright,copyrightlink:n.copyrightlink})};return u.useEffect((()=>{f()}),[]),u.createElement("div",{className:"my-0 px-4 border-t"},u.createElement(Le,{title:"背景",desc:"修改适用于主页的背景，当前版本壁纸尺寸为标准1920x1080，在更大分辨率下会存在模糊问题。",rightHandle:u.createElement(q,{title:"通过刷新获取随机背景图片"},u.createElement(O,{startIcon:u.createElement(ae,null),size:"small",disableElevation:!0,onClick:()=>f()},"刷新"))}),u.createElement("div",{className:F("p-4 justify-center flex flex-wrap mt-2 mb-4 gap-3",Z`
            .ant-image {
              display: block;
            }
          `)},c?[1,2,3,4,5,6,7,8,9,0].map((e=>u.createElement(ot,{key:e,label:" ",disabled:!0,loading:!0}))):a.map(((e,n)=>u.createElement(ot,{key:e.hsh,id:e.hsh,value:s,label:g(e.enddate).format("YYYY/MM/DD"),onChange:e=>(e=>{o(e),y(e);const n=a.find((t=>t.hsh===e));n&&t&&t(p(n))})(e),tip:e.copyright},u.createElement(ne,{spinning:r[n],indicator:u.createElement(re,{size:18,color:"inherit"})},u.createElement(ee,{className:"w-32 h-20 block",onLoad:()=>(e=>{let t=r;t[e]=!1,l(t.map((e=>e)))})(n),preview:!1,placeholder:!0,src:e.url,alt:e.copyright})))))))},mt=[{path:"/",title:"首页",component:le.exports.lazy((()=>ge((()=>import("./index.af7c40a6.js")),["assets/index.af7c40a6.js","assets/index.7d07f921.css","assets/vendor.05a31967.js","assets/vendor.424fa6f1.css"])))},{path:"/navigation",title:"导航",component:le.exports.lazy((()=>ge((()=>import("./index.917619ca.js")),["assets/index.917619ca.js","assets/vendor.05a31967.js","assets/vendor.424fa6f1.css"])))},{path:"/setting",title:"设置",exact:!1,component:e=>{var t=e,{children:a,route:n,history:r,location:l}=t;c(t,["children","route","history","location"]);const[s,i]=u.useState([]),[o,m]=u.useState([]);return u.useEffect((()=>{var e;"/setting"===l.pathname&&r.replace((null==(e=null==n?void 0:n.routes)?void 0:e[0].path)||"/setting"),i(null==n?void 0:n.routes)}),[]),u.useEffect((()=>{const e=((e,t)=>{let a=[];const n=e=>{if(!e)return e;const r=t||l;e.forEach((e=>{-1!==r.pathname.indexOf(e.path)&&a.push(e),e.routes&&n(e.routes)}))};return n(e),a})(n.routes||[]);m(e)}),[l]),u.createElement("div",{className:"flex flex-row h-screen bg-gray-70"},u.createElement("div",{className:"w-72 p-4 h-full"},u.createElement("div",{className:"flex gap-1"},u.createElement(q,{title:"回到首页",arrow:!0},u.createElement(v,{size:"small",onClick:()=>{r.push("/")}},u.createElement(L,null))),u.createElement(q,{title:"返回上级",arrow:!0},u.createElement(v,{size:"small",onClick:()=>{r.goBack()}},u.createElement(M,null)))),u.createElement("div",{className:"flex flex-col gap-1 my-4"},null==s?void 0:s.map((e=>u.createElement("div",{key:e.path,className:F("hover:bg-gray-150","transition-all","px-2.5","py-1.5","cursor-pointer","rounded","text-sm","text-gray-800",{"bg-gray-150":l.pathname.indexOf(e.path)>-1}),onClick:()=>{r.push(e.path)}},e.title))))),u.createElement("div",{className:"h-full overflow-hidden flex flex-col w-full px-6 py-4"},u.createElement(A,{separator:"›","aria-label":"breadcrumb"},o.map(((e,t)=>u.createElement("p",{className:F("text-2xl cursor-pointer mb-0",{"font-semibold":t===o.length-1}),key:e.path,onClick:()=>t!==o.length-1?r.push(e.path):null},e.title)))),u.createElement("div",{className:"flex-grow overflow-y-auto w-full pt-4"},u.createElement("div",{className:"max-w-4xl"},a)),u.createElement("div",{className:"text-center max-w-4xl"},u.createElement(Ue,null))))},routes:[{title:"账户",exact:!1,path:"/setting/auth",component:e=>{var t=e,{history:a,route:n,children:r}=t;c(t,["history","route","children"]);const[l,s]=u.useState([]),[i,o]=u.useState({});return u.useEffect((()=>{s((null==n?void 0:n.routes)||[]),o(qe())}),[]),u.createElement(ve,{location:a.location,pChildren:r},u.createElement(be,{account:i}),u.createElement("div",{className:"flex flex-col gap-2 my-4"},l.map((e=>u.createElement(ye,{key:e.path,title:e.title,icon:e.icon,onClick:()=>a.push(e.path)})))))},routes:[{title:"账户信息",icon:u.createElement(se,null),path:"/setting/auth/info",component:()=>{const[e,t]=u.useState({}),[a,n]=u.useState(!1),[r,l]=u.useState({}),{Item:s}=Re,i=Re.useForm(),{handleSubmit:o,reset:c,setValue:m}=i,d=()=>{n(!1),l({_id:"",username:""}),m("username","")},h=({username:e})=>{Te(r._id,{username:e})&&(d(),l({_id:"",username:""}),t(qe()),P.success("修改成功"))};return u.useEffect((()=>{t(qe())}),[]),u.createElement("div",null,u.createElement(be,{account:e}),u.createElement(Le,{title:"账户设置",desc:"当前使用的账户，网站中所有数据将关联到此账户。当前版本所有存储均放置在本地，不会上传到服务器，但部分功能可能需要基于本地数据实现。该功能正处于早期版本，可能会出现报错，兼容性等问题，请谨慎使用。"}),u.createElement(ye,{title:"账户名称",desc:"修改账户名称",action:u.createElement(O,{variant:"outlined",onClick:()=>{n(!0),l({_id:e._id?e._id:"",username:e.username}),m("username",e.username)}},"修改名称")}),u.createElement(k,{open:a,onClose:d},u.createElement(Ye,{onClose:d},"修改账户名称"),u.createElement(N,null,u.createElement(Re,{form:i,size:"small"},u.createElement(s,{name:"username",label:"账户名称",rules:{required:{value:!0,message:"请输入账户名称"}}},u.createElement(K,{variant:"outlined",placeholder:"请输入账户名称"})))),u.createElement(_,null,u.createElement(O,{disableElevation:!0,variant:"outlined",onClick:d},"取消"),u.createElement(O,{disableElevation:!0,variant:"contained",color:"primary",type:"submit",onClick:()=>{o(h,(e=>{console.log(e)}))()}},"确认"))))}},{title:"其他账户",icon:u.createElement(ie,null),path:"/setting/auth/others",component:()=>{const[e,t]=u.useState(!1),[a,n]=u.useState({}),[r,l]=u.useState([]),[s,c]=u.useState({}),m=e=>{const t=(e=>{let t={};return e&&(t._id={$ne:e}),ze.find(t)})(e);l([...t])},d=(e="")=>{const t=localStorage.getItem("account");t!==e?Je.confirm({title:"删除组件",content:"删除当前账户将同时删除与该账户关联的所有数据",onOk:()=>{(e=>ze.remove(e))(e)&&(P.success("删除成功"),m(t))}}):P.error("使用中的账户无法删除")};return u.useEffect((()=>{(()=>{const e=localStorage.getItem("account");if(e){const t=Ie(e);t&&(n(t),m(e))}})()}),[]),u.createElement("div",null,u.createElement(Le,{title:"当前账户"}),u.createElement(be,{account:a}),u.createElement(Le,{title:"其他账户"}),u.createElement(ye,{title:"添加其他账户",action:u.createElement(O,{variant:"contained",disableElevation:!0,size:"small",onClick:()=>{ze.count()>=10?P.error("最多可以创建10个账户"):t(!0)}},"添加账户")}),u.createElement("div",{className:"flex flex-col gap-2 py-2"},r.map((e=>u.createElement(Qe,{key:e._id,title:e.username,disableDetailPadding:!0},u.createElement(Ge,{title:"切换到此账户",action:u.createElement(O,{variant:"outlined",disableElevation:!0,size:"small",onClick:()=>(e=>{if(!e)return void P.error("异常");const t=Ie(e);localStorage.setItem("account",e),n(t),P.success("切换成功"),m(e)})(e._id)},"切换")}),u.createElement(Ge,{title:"修改账户",action:u.createElement(O,{variant:"outlined",disableElevation:!0,size:"small",color:"warning",onClick:()=>{t(!0),c({_id:e._id||"",username:e.username})}},"修改")}),u.createElement(Ge,{title:"删除账户",action:u.createElement(O,{variant:"outlined",disableElevation:!0,color:"error",size:"small",onClick:()=>d(e._id)},"删除")}))))),u.createElement(Xe,{title:s._id?"修改账户":"新增账户",value:s,open:e,onCancel:()=>{t(!1)},onOk:s._id?({username:e})=>{Te(s._id,{username:e})&&(P.success("修改成功"),t(!1),m(a._id),c({_id:"",username:""}))}:({username:e})=>{if((e=>{let t={username:{$eq:e}};return ze.findOne(t)})(e))return void P.error("账户名称不能重复");let a=o(i({},Ke),{username:e});if(De(a)){P.success("添加成功"),t(!1);const e=localStorage.getItem("account");m(e)}}}))}}]},{title:"个性化",exact:!1,path:"/setting/personalise",component:e=>{var t=e,{history:a,route:n,children:r}=t;c(t,["history","route","children"]);const[l,s]=u.useState([]),[i,o]=u.useState({});return u.useEffect((()=>{const e=qe();o(e.background),s((null==n?void 0:n.routes)||[])}),[]),u.createElement(ve,{location:a.location,pChildren:r},u.createElement(at,{data:i}),u.createElement("div",{className:"flex flex-col gap-2 my-4"},l.map((e=>u.createElement(ye,{key:e.path,title:e.title,icon:e.icon,onClick:()=>a.push(e.path)})))))},routes:[{title:"背景",icon:u.createElement(oe,null),path:"/setting/personalise/background",component:()=>{const[e,t]=u.useState({}),[a,n]=u.useState("color"),[r,l]=u.useState({}),[s,c]=u.useState({}),[m,d]=u.useState(!1),h=[{label:"纯色",value:"color",canSelect:!0,autoExpaneded:!1},{label:"必应壁纸",value:"random",canSelect:!0,autoExpaneded:!0},{label:"每日一图",value:"everyday",canSelect:!0,autoExpaneded:!1},{label:"在线图片",value:"link",canSelect:!0,autoExpaneded:!0}],p=(e,t)=>{Te(e,{background:t})};return u.useEffect((()=>{(()=>{const e=qe();if(l(e),e&&e.background){const a=e.background.type,r=h.find((e=>e.value===a));t(r||h[0]),n(a||h[0].value),c(e.background)}else e._id&&p(e._id,{type:h[0].value}),t(h[0]),n(h[0].value),c({type:h[0].value})})()}),[]),u.createElement("div",null,u.createElement(at,{data:s}),u.createElement("div",{className:"flex gap-2 flex-col"},u.createElement(Qe,{expanded:m,onChange:(e,t)=>{d(t)},title:"个性化设置背景",desc:"背景设置主要适用于主页",action:u.createElement(nt,{label:"背景类型",value:a,size:"small",onChange:e=>{const a=e.target.value,l=h.find((e=>e.value===a));if(l&&(n(a),t(l),d(l.autoExpaneded),!0===l.canSelect)){const e={type:a};r._id&&p(r._id,e),c(e)}},options:h}),disableDetailPadding:!0},"color"===e.value&&u.createElement(X,{severity:"info"},"设置为纯色背景，在纯色设置时，会自动应用当前主题配色。"),"random"===e.value&&u.createElement(ct,{data:s.data,onChange:e=>{if("random"===s.type){const t=o(i({},s),{data:e});c(t),r._id&&p(r._id,t)}}}),"everyday"===e.value&&u.createElement(rt,{data:s.data}),"link"===e.value&&u.createElement(it,{data:s.data,onChange:e=>{if("link"===s.type){const t={url:e},a=o(i({},s),{data:t});c(a),r._id&&p(r._id,a)}}}))))}}]}]}],ut=(e,t)=>e.map((e=>u.createElement(ue,{path:e.path,key:e.path,exact:void 0===e.exact||e.exact,component:a=>(document.title=t?`${t.title}-${e.title}`:e.title||"",u.createElement(e.component,o(i({},a),{route:e,children:e.routes?ut(e.routes,e):void 0})))})));function dt(e){return u.createElement("div",{className:"App"},u.createElement(le.exports.Suspense,{fallback:u.createElement(fe,null)},u.createElement(ce,null,u.createElement(me,null,ut(mt)))))}var ht={placeholder:{"qing-shu-ru-sou-suo-nei-rong":"Enter search content"},"sou-suo":"Search"};const pt={"zh-CN":{translation:i({},{placeholder:{"qing-shu-ru-sou-suo-nei-rong":"请输入搜索内容"},"sou-suo":"搜索"})},"en-US":{translation:i({},ht)}};de.use(he).use(pe).init({resources:pt,fallbackLng:"zh-CN"}),window.addEventListener("DOMContentLoaded",(()=>{if(!localStorage.getItem("account")){const e=De(Ke);localStorage.setItem("account",e._id)}})),window.onerror=function(e,t,a,n,r){return console.log(e,t,a,n,r),P.error(e),!1},I.render(u.createElement(u.StrictMode,null,u.createElement(dt,null)),document.getElementById("root"));export{Ue as C,Ye as D,$e as S,Fe as a,qe as b,Be as g,Ze as i,tt as l,We as r};
