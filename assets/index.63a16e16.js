var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,i=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&s(e,a,t[a]);if(n)for(var a of n(t))l.call(t,a)&&s(e,a,t[a]);return e},o=(e,n)=>t(e,a(n)),c=("undefined"!=typeof require&&require,(e,t)=>{var a={};for(var s in e)r.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&n)for(var s of n(e))t.indexOf(s)<0&&l.call(e,s)&&(a[s]=e[s]);return a}),m=(e,t,a)=>(s(e,"symbol"!=typeof t?t+"":t,a),a);import{R as u,C as d,a as h,K as p,A as f,b as E,d as g,D as y,I as v,c as b,u as x,e as k,f as w,g as N,h as C,i as O,j as S,B as _,k as I,H as j,l as $,m as z,n as T,o as D,T as K,p as P,q,r as M,s as L,t as A,v as F,w as Y,x as J,E as R,y as V,z as H,S as W,F as B,G as U,J as G,M as Q,L as X,N as Z,O as ee,P as te,Q as ae,U as ne,V as re,W as le,X as se,Y as ie,Z as oe,_ as ce}from"./vendor.2a2d3f91.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const me={},ue=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`/${e}`)in me)return;me[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise(((e,t)=>{n.addEventListener("load",e),n.addEventListener("error",t)})):void 0}))).then((()=>e())):e()},de=e=>{var t=e,{title:a,desc:n,icon:r,onClick:l,action:s}=t;c(t,["title","desc","icon","onClick","action"]);const i=u.createElement(h,{className:"px-4 py-3"},u.createElement("div",{className:"flex"},u.createElement("div",{className:"flex-grow flex items-center justify-start"},r&&u.createElement("div",{className:"mr-1"},r),u.createElement("div",null,u.createElement("p",{className:"text-sm mb-0"},a),n&&u.createElement("p",{className:"text-xs mb-0 text-gray-700"},n))),u.createElement("div",{className:"flex items-center"},s||u.createElement(p,{fontSize:"small"}))));return u.createElement("div",{className:"bg-white rounded border hover:bg-gray-100 transition"},s?i:u.createElement(d,{onClick:()=>l?l():null},i))},he=({pChildren:e,children:t,location:a})=>e&&e.find((e=>e.key===a.pathname))?u.createElement(u.Fragment,null,e):t,pe=({account:e})=>{var t;return u.createElement("div",{className:"flex py-4 pl-0 items-center"},u.createElement("div",{className:"mr-4"},u.createElement(f,{sx:{width:64,height:64}},null==(t=e.username)?void 0:t.split("")[0].toLocaleUpperCase())),u.createElement("div",null,u.createElement("div",{className:"text-lg font-bold leading-7 mb-0"},e.username,u.createElement(E,{className:"ml-2",size:"small",color:"info",label:"local"===e.type?"本地账户":"注册账户"})),u.createElement("div",{className:"text-sm mt-1 mb-0"},"创建时间: ",g(e.createdTime).format("YYYY-MM-DD HH:mm"))))},fe=["$eq","$gt","$gte","$in","$lt","$lte","$ne","$nin"],Ee=e=>"number"!=typeof e,ge={$eq:(e,t)=>t===e,$gt:(e,t)=>{if(Ee(e))throw new Error("'$gt' value must be a number");return t>e},$gte:(e,t)=>{if(Ee(e))throw new Error("'$gte' value must be a number");return t>=e},$in:(e,t)=>{if(!(e instanceof Array))throw new Error("'$in' value must be an array");return e.includes(t)},$lt:(e,t)=>{if(Ee(e))throw new Error("'$lt' value must be a number");return t<e},$lte:(e,t)=>{if(Ee(e))throw new Error("'$lte' value must be a number");return t<=e},$ne:(e,t)=>t!==e,$nin:(e,t)=>{if(!(e instanceof Array))throw new Error("'$nin' value must be an array");return!e.includes(t)},_checkExist:e=>{if(fe.includes(e))return!0;throw new Error("unknown operator: '"+e+"'")}},ye=(e,t)=>{var a,n,r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),l=[];if(t=t||r.length,e)for(a=0;a<e;a++)l[a]=r[0|Math.random()*t];else for(l[8]=l[13]=l[18]=l[23]="-",l[14]="4",a=0;a<36;a++)l[a]||(n=0|16*Math.random(),l[a]=r[19==a?3&n|8:n]);return l.join("")},ve=e=>e instanceof Object&&"Object"===e.constructor.name,be=e=>e instanceof Array&&"Array"===e.constructor.name,xe=(e,t)=>{if(!e||!Object.keys(e).length)return!0;for(let a of Object.keys(e)){let n=e[a],r=t[a];if(n instanceof RegExp){if(!n.test(r))return!1}else if(ve(n)){for(let e of Object.keys(n))if(ge._checkExist(e)&&!ge[e](n[e],r))return!1}else if(n!==r)return!1}return!0},ke=(e,t,a,n,r)=>{n=n||0;let l=(r=r||Object.keys(e))[n];return l?t[l]===a[l]?(n++,ke(e,t,a,n,r)):1===e[l]?t[l]-a[l]:-1===e[l]?a[l]-t[l]:void 0:0};class we{constructor(e,t,a){m(this,"name"),m(this,"storage"),m(this,"cache"),m(this,"path"),m(this,"cacheable"),m(this,"primaryKey"),a=a||{},this.name=t,this.storage=e.storage,this.path=e.database+e.sep+t,this.primaryKey=a.primaryKey||e.primaryKey,this.cache=[],this.cacheable=!1}_initCache(){let e=[],t=new RegExp("^"+this.path);for(let a of Object.keys(this.storage))t.test(a)&&(e=JSON.parse(this.storage.getItem(a)));this.cache=e,this.cacheable=!0}_filter(e,t){t.type=t.type||"data",t.multi=t.multi||!1,this.cacheable||this._initCache();let a,n=[],r="id"===t.type;if("string"==typeof e)e=new RegExp(e);else if("function"==typeof e)a=!0;else if(!e){let e=r?Object.keys(this.cache):Object.values(this.cache);return t.multi?e:e[0]||null}for(let l of Object.keys(this.cache)){let s=this.cache[Number(l)];if(a){if(e(l,s)){let e=r?l:s;if(!t.multi)return e;n.push(e)}}else if(e.test(s[this.primaryKey])){let e=r?l:s;if(!t.multi)return e;n.push(e)}}return t.multi?n:null}inset(e,t){var a;let n=be(e),r=ve(e);if(n){if(0===e.length)return[]}else e=[e];let l=this.primaryKey,s=this.cacheable,i=JSON.parse(this.storage.getItem(this.path)||"[]");for(let o of e){if(!r&&!n)throw new Error("TypeError: insert data must be an object or an object array");void 0!==o[l]&&0!==(null==(a=o[l])?void 0:a.length)||(o[l]=ye()),o.createdTime||(o.createdTime=new Date,o.updatedTime=""),s&&(this.cache=i.concat(o)),this.storage.setItem(this.path,JSON.stringify(i.concat(o)))}return n?e:e[0]}find(e,t){let a;e=e||{},(t=t||{}).skip=t.skip||0,t.limit=t.limit,t.sort=t.sort,be(t.sort)&&(t.sort=t.sort.reduce(((e,t)=>("string"==typeof t?e[t]=1:t instanceof Array&&t.length&&(e[t[0]]=t[1]||1),e)),{}));let n=ve(e)?null:be(e)?e:[e],r={type:t._filterType||"data",multi:!0};if(n){let e=new RegExp("^"+n.join("|")+"$");a=this._filter(e,r)}else a=Object.keys(e).length?this._filter(((t,a)=>xe(e,a)),r):this._filter(null,r);return t.sort&&a.sort(((e,a)=>ke(null==t?void 0:t.sort,e,a))),t.limit?a=a.slice(t.skip,t.skip+t.limit):t.skip&&(a=a.slice(t.skip)),a}findOne(e,t){let a;t=t||{};let n=ve(e=e||{})?null:e,r=e?Object.keys(e):[],l=!1,s=!!t.sort,i={type:t._filterType||"data",multi:!1};if(r.length&&r.includes(this.primaryKey)&&(n=e[this.primaryKey],l=!0),n){if(a=this.storage.getItem(this.path),a=a?JSON.parse(a):null,a&&l&&!xe(e,a))return null;a=a?a.find((e=>e[this.primaryKey]===n)):void 0}else a=r.length?s?this.find(e,t):this._filter(((t,a)=>xe(e,a)),i):s?this.find(e,t):this._filter(null,i);return!n&&s&&a&&(a=a[0]||null),a}remove(e,t){if(!e)throw new Error("remove needs a query");(t=t||{}).multi=void 0===t.multi||t.multi;let a=JSON.parse(this.storage.getItem(this.path)),n=t.multi?this.find(e,{_filterType:"data"}):this.findOne(e,{_filterType:"data"}),r=this.cacheable;if(t.mulit&&!n.length||!t.mulit&&!n)return 0;t.multi||(n=[n]);for(let l of n)r&&(this.cache=this.cache.filter((e=>e[this.primaryKey]!==l[this.primaryKey]))),a=a.filter((e=>e[this.primaryKey]!==l[this.primaryKey])),this.storage.setItem(this.path,JSON.stringify(a));return n.length}update(e,t,a){if(!e)throw new Error("update needs a query");if(!t||!ve(t))throw new Error("update needs an object");(a=a||{}).multi=void 0!==a.multi&&a.multi;let n=this.primaryKey,r=this.cacheable;t[n]&&delete t[n];let l=a.multi?this.find(e,{_filterType:(null==a?void 0:a._filterType)||"data"}):this.findOne(e,{_filterType:(null==a?void 0:a._filterType)||"data"});if(a.mulit&&!l.length||!a.mulit&&!l)return 0;if(a.multi){delete t[n];let e=l,a=JSON.parse(this.storage.getItem(this.path));return a?(a=a.map((a=>(e.forEach((e=>{if(a[n]===e[n])for(let n in t)a[n]=t[n],a.updatedTime=new Date})),a))),r&&(this.cache=a),this.storage.setItem(this.path,JSON.stringify(a)),l.length):null}{let e=l,a=JSON.parse(this.storage.getItem(this.path));return a?(a=a.map((a=>{if(a[n]===e[n])for(let e in t)a[e]=t[e],a.updatedTime=new Date;return a})),this.storage.setItem(this.path,JSON.stringify(a)),r&&(this.cache=a),a):null}}drop(){return this.remove({}),!0}count(){let e=this.storage.getItem(this.path);return e?JSON.parse(e).length:void 0}}class Ne{constructor(e){m(this,"storage"),m(this,"database"),m(this,"primaryKey"),m(this,"sep"),this.storage=e.storage||window&&window.localStorage,this.database=e.database||"db",this.primaryKey=e.primaryKey||"_id",this.sep=e.sep||":",(e=>{if(!(e&&e instanceof Object))return!1;try{return e.setItem("_supported","1"),e.removeItem("_supported"),!0}catch(t){return!1}})(this.storage)||(this.storage=null)}get(e,t){return new we(this,e,t||{storage:this.storage,database:this.database,primaryKey:this.primaryKey,sep:this.sep})}collection(e,t){return this.get(e,t)}size(){let e=0;for(let t in this.storage)if(this.storage.hasOwnProperty(t)&&-1!==t.indexOf(this.database+":")){const a=this.storage.getItem(t);e+=a?a.length:0}return e}}const Ce=new Ne({storage:localStorage,database:"database"}).get("auth"),Oe=e=>Ce.findOne(e),Se=(e,t)=>Ce.update(e,t),_e=e=>Ce.inset(e),Ie={username:"默认账户",avatar:"",type:"local",language:"zh-CN",sync:{setting:!1,website:!1,history:!1}},je=()=>{const e=_e(Ie);return localStorage.setItem("account",e._id),e},$e=()=>{const e=localStorage.getItem("account");if(e){const t=Oe(e);return t||je()}return je()},ze=({title:e,desc:t,rightHandle:a})=>u.createElement("div",{className:"py-2"},u.createElement("div",{className:"font-semibold flex items-center justify-between"},u.createElement("p",{className:"mb-0"},e),a),t&&u.createElement("p",{className:"mt-1 mb-0 text-sm text-gray-800"},t));const Te=()=>u.createElement(u.Fragment,null,u.createElement(O,{className:"MuiDialog-confirm-icon-info"})),De=e=>{const t=e,{open:a,title:n,content:r,type:l,onClose:s,okText:o,cancelText:m,onOk:d,onCancel:h}=t,p=c(t,["open","title","content","type","onClose","okText","cancelText","onOk","onCancel"]),f=x(),E=k(f.breakpoints.down("sm"));return u.createElement(w,i({className:"MuiDialog-confirm",open:a,onClose:h,fullScreen:E},p),u.createElement(Pe,{onClose:h},n),u.createElement(N,null,u.createElement(C,null,(()=>{const e={info:Te(),success:u.createElement(u.Fragment,null,u.createElement(I,{className:"MuiDialog-confirm-icon-success"})),error:u.createElement(u.Fragment,null,u.createElement(j,{className:"MuiDialog-confirm-icon-error"})),warning:u.createElement(u.Fragment,null,u.createElement($,{className:"MuiDialog-confirm-icon-warning"}))};return l?e[l]:Te()})(),r)),u.createElement(S,null,u.createElement(_,{size:"small",disableElevation:!0,variant:"contained",onClick:h},m||"Cancel"),u.createElement(_,{size:"small",disableElevation:!0,variant:"contained",color:"primary",onClick:d},o||"Ok")))};var Ke=new class{constructor(){m(this,"dom")}confirm(e){const{title:t,content:a,type:n="info",okText:r,cancelText:l,onOk:s,onCancel:i}=e;this.dom=document.createElement("div");const o=u.createElement(De,{open:!0,container:this.dom,title:t,content:a,type:n,okText:r,cancelText:l,onOk:()=>this.onOk(s),onCancel:()=>this.onCancel(i)});z.render(o,this.dom),document.body.append(this.dom)}onCancel(e){e instanceof Function&&e(),this.close()}onOk(e){e instanceof Function&&e(),this.close()}close(){var e;null==(e=this.dom)||e.setAttribute("style","opacity:0;transition: opacity 225ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;"),setTimeout((()=>{this.dom&&this.dom.remove()}),226)}};const Pe=e=>{var t=e,{onClose:a,children:n}=t,r=c(t,["onClose","children"]);return u.createElement(y,i({},r),n,a?u.createElement(v,{className:"absolute right-3 top-3","aria-label":"close",onClick:a,size:"small"},u.createElement(b,null)):null)},qe=Ke;let Me=e=>{const{id:t,form:a,size:n,children:r}=e,[l,s]=u.useState([]);return u.useEffect((()=>{if(r instanceof Object&&!r.length)s([u.cloneElement(r,{control:a.control,size:n,key:"form-item"})]);else{if(!(r instanceof Array&&r.length))throw new Error("Children must be object or array");s(r.map(((e,t)=>u.createElement(u.Fragment,{key:t},u.cloneElement(e,{control:a.control,size:n,key:t})))))}}),[r]),u.createElement("form",{id:t,style:{overflow:"hidden"}},l)};Me.useForm=D,Me.Item=e=>{const{name:t,children:a,size:n,rules:r,defaultValue:l="",label:s,control:m}=e;return u.createElement("div",{style:{padding:"6px 0"}},u.createElement(T,{name:t,control:m,rules:r,defaultValue:l,render:e=>{var t=e,{field:r}=t,l=r,{onChange:m}=l,d=c(l,["onChange"]),{fieldState:{error:h}}=t;return u.cloneElement(a,o(i({onChange:e=>{a.props.onChange&&a.props.onChange(e),m(e)},label:s,size:n},d),{error:!!h,helperText:h?h.message:""}))}}))};var Le="0.1",Ae={startTime:"2018",href:"https://search.virs.xyz",author:"Vir"};const Fe=()=>{const[e,t]=u.useState({}),a=g(new Date).format("YYYY"),n=()=>{(()=>{const e=i({version:Le},Ae);return new Promise((t=>{t({code:200,msg:"获取成功",data:e})}))})().then((e=>{t(e.data)}))};return u.useEffect((()=>{n()}),[]),u.createElement("a",{className:"copyright text-sm text-gray-300 hover:text-gray-800 font-mono",href:e.href},"©",e.startTime,"-",a," by ",e.author,". All rights reserved.")},Ye=({title:e,action:t})=>u.createElement("div",{className:"flex justify-between items-center border-t px-4 py-2"},u.createElement("div",null,e),u.createElement("div",null,t)),Je=({title:e,desc:t,action:a,children:n,disableDetailPadding:r=!1})=>u.createElement(Y,{className:"rounded border shadow-none bg-white my-0"},u.createElement(J,{className:" transition hover:bg-gray-100",expandIcon:u.createElement(R,null)},u.createElement("div",{className:"flex items-center justify-between w-full mr-2"},u.createElement("div",null,e&&u.createElement("p",{className:"mb-0 text-sm font-semibold"},e),t&&u.createElement("p",{className:"mb-0 text-xs"},t)),u.createElement("div",{className:"flex items-center"},a))),u.createElement(V,{className:A({"p-0":r})},n)),Re=({open:e,title:t,value:a,onOk:n,onCancel:r})=>{const{Item:l}=Me,s=Me.useForm(),{handleSubmit:i,reset:o,setValue:c}=s;return u.useEffect((()=>{e&&a&&c("username",a.username),e||c("username","")}),[e]),u.createElement(w,{open:e,onClose:r},u.createElement(Pe,{onClose:r},t||"修改账户名称"),u.createElement(N,null,u.createElement(Me,{form:s,size:"small"},u.createElement(l,{name:"username",label:"账户名称",rules:{required:{value:!0,message:"请输入账户名称"}}},u.createElement(K,{variant:"outlined",placeholder:"请输入账户名称"})))),u.createElement(S,null,u.createElement(_,{disableElevation:!0,variant:"outlined",onClick:()=>{r()}},"取消"),u.createElement(_,{disableElevation:!0,variant:"contained",color:"primary",type:"submit",onClick:()=>{i(n,(e=>{console.log(e)}))()}},"确认")))},Ve=H.create({baseURL:"http://api.virs.xyz",timeout:1e4,validateStatus:e=>e>=200&&e<=500});Ve.interceptors.request.use((e=>(e.headers={},e)),(e=>{const t=e.response;return null==t||t.status,Promise.reject(e)})),Ve.interceptors.response.use((e=>e),(e=>Promise.reject(e)));const He=new Ne({storage:localStorage,database:"database"}).get("background"),We=(e,t)=>{let a;t&&(t.userId=e,a=He.inset(t));let n=t?{_id:{$ne:a._id}}:{};return He.update(i({userId:{$eq:e},check:{$eq:!0}},n),{check:!1},{multi:!0}),a};const Be=({label:e,id:t,value:a,tip:n,disabled:r=!1,loading:l=!1,children:s,onChange:i})=>{const[o,c]=u.useState(t===a);u.useEffect((()=>{a!==t&&a&&c(!1)}),[a]),u.useEffect((()=>{o&&i&&t&&i(t)}),[o]);const m=()=>u.createElement("input",{className:A("outline-card-radio",{checked:!l&&o}),type:"radio",id:t,name:a,checked:o,onChange:()=>{},onClick:()=>c(!0),disabled:r});return u.createElement("div",{className:"outline-card-root"},u.createElement("div",{className:"outline-card-container-flex"},n?u.createElement(q,{title:n},m()):m(),u.createElement("label",{slot:"label",htmlFor:t,className:"outline-card-label"},u.createElement("div",{className:"outline-card-label-content"},u.createElement("div",{className:"outline-card-content"},l?u.createElement(W,{variant:"rectangular",width:136,height:76}):s),e&&u.createElement("div",null,u.createElement("label",{className:"outline-card-title"},l?u.createElement(W,{variant:"text",width:100,height:16}):e))))))},Ue=({value:e,label:t,size:a="medium",options:n,optionsConfig:r,onChange:l})=>u.createElement(B,{sx:{minWidth:120}},u.createElement(U,{fullWidth:!0},u.createElement(G,{id:`mui-select-label-${t}`},t),u.createElement(Q,{labelId:`mui-select-label-${t}`,id:`mui-select-${t}`,value:e,label:t,size:a,onChange:l,onClose:e=>e.stopPropagation()},n.map((e=>{const t=r&&r.label?e[r.label]:e.label,a=r&&r.value?e[r.value]:e.value;return u.createElement(X,{key:a,value:a},t)})))));const Ge=[{path:"/",component:ne.exports.lazy((()=>ue((()=>import("./index.620e96e9.js")),["assets/index.620e96e9.js","assets/index.28f6fdd0.css","assets/vendor.2a2d3f91.js","assets/vendor.bb91be95.css"])))},{path:"/navigation",component:ne.exports.lazy((()=>ue((()=>import("./index.6536b2f7.js")),["assets/index.6536b2f7.js","assets/vendor.2a2d3f91.js","assets/vendor.bb91be95.css"])))},{path:"/setting",exact:!1,component:e=>{var t=e,{children:a,route:n,history:r,location:l}=t;c(t,["children","route","history","location"]);const[s,i]=u.useState([]),[o,m]=u.useState([]);return u.useEffect((()=>{var e;"/setting"===l.pathname&&r.replace((null==(e=null==n?void 0:n.routes)?void 0:e[0].path)||"/setting"),i(null==n?void 0:n.routes)}),[]),u.useEffect((()=>{const e=((e,t)=>{let a=[];const n=e=>{if(!e)return e;const r=t||l;e.forEach((e=>{-1!==r.pathname.indexOf(e.path)&&a.push(e),e.routes&&n(e.routes)}))};return n(e),a})(n.routes||[]);m(e)}),[l]),u.createElement("div",{className:"flex flex-row h-screen bg-gray-70"},u.createElement("div",{className:"w-72 p-4 h-full"},u.createElement("div",{className:"flex gap-1"},u.createElement(q,{title:"回到首页",arrow:!0},u.createElement(v,{size:"small",onClick:()=>{r.push("/")}},u.createElement(M,null))),u.createElement(q,{title:"返回上级",arrow:!0},u.createElement(v,{size:"small",onClick:()=>{r.goBack()}},u.createElement(L,null)))),u.createElement("div",{className:"flex flex-col gap-1 my-4"},null==s?void 0:s.map((e=>u.createElement("div",{key:e.path,className:A("hover:bg-gray-150","transition-all","px-2.5","py-1.5","cursor-pointer","rounded","text-sm","text-gray-800",{"bg-gray-150":l.pathname.indexOf(e.path)>-1}),onClick:()=>{r.push(e.path)}},e.title))))),u.createElement("div",{className:"h-full overflow-hidden flex flex-col w-full px-6 py-4"},u.createElement(F,{separator:"›","aria-label":"breadcrumb"},o.map(((e,t)=>u.createElement("p",{className:A("text-2xl cursor-pointer mb-0",{"font-semibold":t===o.length-1}),key:e.path,onClick:()=>t!==o.length-1?r.push(e.path):null},e.title)))),u.createElement("div",{className:"flex-grow overflow-y-auto w-full pt-4"},u.createElement("div",{className:"max-w-4xl"},a)),u.createElement("div",{className:"text-center max-w-4xl"},u.createElement(Fe,null))))},routes:[{title:"账户",exact:!1,path:"/setting/auth",component:e=>{var t=e,{history:a,route:n,children:r}=t;c(t,["history","route","children"]);const[l,s]=u.useState([]),[i,o]=u.useState({});return u.useEffect((()=>{s((null==n?void 0:n.routes)||[]),o($e())}),[]),u.createElement(he,{location:a.location,pChildren:r},u.createElement(pe,{account:i}),u.createElement("div",{className:"flex flex-col gap-2 my-4"},l.map((e=>u.createElement(de,{key:e.path,title:e.title,icon:e.icon,onClick:()=>a.push(e.path)})))))},routes:[{title:"账户信息",icon:u.createElement(re,null),path:"/setting/auth/info",component:()=>{const[e,t]=u.useState({}),[a,n]=u.useState(!1),[r,l]=u.useState({}),{Item:s}=Me,i=Me.useForm(),{handleSubmit:o,reset:c,setValue:m}=i,d=()=>{n(!1),l({_id:"",username:""}),m("username","")},h=({username:e})=>{Se(r._id,{username:e})&&(d(),l({_id:"",username:""}),t($e()),P.success("修改成功"))};return u.useEffect((()=>{t($e())}),[]),u.createElement("div",null,u.createElement(pe,{account:e}),u.createElement(ze,{title:"账户设置",desc:"当前使用的账户，网站中所有数据将关联到此账户。当前版本所有存储均放置在本地，不会上传到服务器，但部分功能可能需要基于本地数据实现。该功能正处于早期版本，可能会出现报错，兼容性等问题，请谨慎使用。"}),u.createElement(de,{title:"账户名称",desc:"修改账户名称",action:u.createElement(_,{variant:"outlined",onClick:()=>{n(!0),l({_id:e._id?e._id:"",username:e.username}),m("username",e.username)}},"修改名称")}),u.createElement(w,{open:a,onClose:d},u.createElement(Pe,{onClose:d},"修改账户名称"),u.createElement(N,null,u.createElement(Me,{form:i,size:"small"},u.createElement(s,{name:"username",label:"账户名称",rules:{required:{value:!0,message:"请输入账户名称"}}},u.createElement(K,{variant:"outlined",placeholder:"请输入账户名称"})))),u.createElement(S,null,u.createElement(_,{disableElevation:!0,variant:"outlined",onClick:d},"取消"),u.createElement(_,{disableElevation:!0,variant:"contained",color:"primary",type:"submit",onClick:()=>{o(h,(e=>{console.log(e)}))()}},"确认"))))}},{title:"其他账户",icon:u.createElement(le,null),path:"/setting/auth/others",component:()=>{const[e,t]=u.useState(!1),[a,n]=u.useState({}),[r,l]=u.useState([]),[s,c]=u.useState({}),m=e=>{const t=(e=>{let t={};return e&&(t._id={$ne:e}),Ce.find(t)})(e);l([...t])},d=(e="")=>{const t=localStorage.getItem("account");t!==e?qe.confirm({title:"删除组件",content:"删除当前账户将同时删除与该账户关联的所有数据",onOk:()=>{(e=>Ce.remove(e))(e)&&(P.success("删除成功"),m(t))}}):P.error("使用中的账户无法删除")};return u.useEffect((()=>{(()=>{const e=localStorage.getItem("account");if(e){const t=Oe(e);t&&(n(t),m(e))}})()}),[]),u.createElement("div",null,u.createElement(ze,{title:"当前账户"}),u.createElement(pe,{account:a}),u.createElement(ze,{title:"其他账户"}),u.createElement(de,{title:"添加其他账户",action:u.createElement(_,{variant:"contained",disableElevation:!0,size:"small",onClick:()=>{Ce.count()>=10?P.error("最多可以创建10个账户"):t(!0)}},"添加账户")}),u.createElement("div",{className:"flex flex-col gap-2 py-2"},r.map((e=>u.createElement(Je,{key:e._id,title:e.username,disableDetailPadding:!0},u.createElement(Ye,{title:"切换到此账户",action:u.createElement(_,{variant:"outlined",disableElevation:!0,size:"small",onClick:()=>(e=>{if(!e)return void P.error("异常");const t=Oe(e);localStorage.setItem("account",e),n(t),P.success("切换成功"),m(e)})(e._id)},"切换")}),u.createElement(Ye,{title:"修改账户",action:u.createElement(_,{variant:"outlined",disableElevation:!0,size:"small",color:"warning",onClick:()=>{t(!0),c({_id:e._id||"",username:e.username})}},"修改")}),u.createElement(Ye,{title:"删除账户",action:u.createElement(_,{variant:"outlined",disableElevation:!0,color:"error",size:"small",onClick:()=>d(e._id)},"删除")}))))),u.createElement(Re,{title:s._id?"修改账户":"新增账户",value:s,open:e,onCancel:()=>{t(!1)},onOk:s._id?({username:e})=>{Se(s._id,{username:e})&&(P.success("修改成功"),t(!1),m(a._id),c({_id:"",username:""}))}:({username:e})=>{if((e=>{let t={username:{$eq:e}};return Ce.findOne(t)})(e))return void P.error("账户名称不能重复");let a=o(i({},Ie),{username:e});if(_e(a)){P.success("添加成功"),t(!1);const e=localStorage.getItem("account");m(e)}}}))}}]},{title:"个性化",exact:!1,path:"/setting/personalise",component:e=>{var t=e,{history:a,route:n,children:r}=t;c(t,["history","route","children"]);const[l,s]=u.useState([]);return u.useEffect((()=>{s((null==n?void 0:n.routes)||[])}),[]),u.createElement(he,{location:a.location,pChildren:r},u.createElement("div",{className:"flex flex-col gap-2 my-4"},l.map((e=>u.createElement(de,{key:e.path,title:e.title,icon:e.icon,onClick:()=>a.push(e.path)})))))},routes:[{title:"背景",icon:u.createElement(se,null),path:"/setting/personalise/background",component:()=>{const[e,t]=u.useState("random"),[a,n]=u.useState([]),[r,l]=u.useState([]),[s,i]=u.useState(""),[o,c]=u.useState(!1),[m,d]=u.useState(!1),h=()=>{c(!0);const e=p();var t;(t={size:9,hsh:e},Ve.get("/v1/resource/bing/random",{params:t})).then((e=>{let t=e.data.data;n(t),l(t.map((()=>!0))),c(!1)}))},p=()=>{const e=(e=>e?He.findOne({userId:{$eq:e},check:{$eq:!0}}):null)(localStorage.getItem("account"));let t="empty";return e&&(t=e.hsh),i(t),t},f=e=>{i(e),E(e)},E=e=>{if(!m)return d(!0);const t=localStorage.getItem("account");"empty"===e&&t&&We(t);const n=a.find((t=>t.hsh===e));n&&t&&We(t,{check:!0,url:n.url,bgId:n._id,hsh:n.hsh,copyright:n.copyright,copyrightlink:n.copyrightlink})};return u.useEffect((()=>{h()}),[]),u.createElement("div",null,u.createElement(Je,{title:"个性化设置背景",desc:"背景设置主要适用于主页",action:u.createElement(Ue,{label:"背景类型",value:e,size:"small",onChange:e=>{t(e.target.value)},options:[{label:"必应壁纸",value:"random"},{label:"每日一图",value:"everyday"},{label:"在线图片",value:"online"}]}),disableDetailPadding:!0},"random"===e&&u.createElement("div",{className:"bing-img-root border-t p-4 justify-center my-0"},!o&&u.createElement(Be,{id:"empty",value:s,onChange:e=>f(e),label:"默认背景"},u.createElement(Z,{className:"content-w-h",preview:!1,placeholder:u.createElement("div",{className:"bg-empty"},u.createElement(ee,null))})),o?[1,2,3,4,5,6,7,8,9,0].map((e=>u.createElement(Be,{key:e,disabled:!0,loading:!0}))):a.map(((e,t)=>u.createElement(Be,{key:e.hsh,id:e.hsh,value:s,label:g(e.enddate).format("YYYY/MM/DD"),onChange:e=>f(e),tip:e.copyright},u.createElement(te,{spinning:r[t],indicator:u.createElement(ae,{size:18,color:"inherit"})},u.createElement(Z,{className:"content-w-h",onLoad:()=>(e=>{let t=r;t[e]=!1,l(t.map((e=>e)))})(t),preview:!1,placeholder:!0,src:e.url,alt:e.copyright})))))),"online"===e&&u.createElement(Ye,{title:"使用在线图片",action:u.createElement(_,{variant:"outlined",disableElevation:!0,size:"small"},"添加在线图片")})))}}]}]}],Qe=e=>e.map((e=>u.createElement(ce,{path:e.path,key:e.path,exact:void 0===e.exact||e.exact,component:t=>u.createElement(e.component,o(i({},t),{route:e,children:e.routes?Qe(e.routes):void 0}))})));function Xe(e){return u.useEffect((()=>{console.log(e)}),[]),u.createElement("div",{className:"App"},u.createElement(ne.exports.Suspense,{fallback:u.createElement("p",null,"loading")},u.createElement(ie,null,u.createElement(oe,null,Qe(Ge)))))}window.addEventListener("DOMContentLoaded",(()=>{if(!localStorage.getItem("account")){const e=_e(Ie);localStorage.setItem("account",e._id)}})),z.render(u.createElement(u.StrictMode,null,u.createElement(Xe,null)),document.getElementById("root"));export{Fe as C,Ve as i};
