var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,s=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&l(e,a,t[a]);if(n)for(var a of n(t))o.call(t,a)&&l(e,a,t[a]);return e},c=(e,n)=>t(e,a(n)),i=("undefined"!=typeof require&&require,(e,t)=>{var a={};for(var l in e)r.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&n)for(var l of n(e))t.indexOf(l)<0&&o.call(e,l)&&(a[l]=e[l]);return a});import{i as u,D as m,g as d,S as g,a as p,r as f,C as E,b as h,l as b}from"./index.e41d1403.js";import{R as v,b as w,t as x,W as y,a4 as S,a5 as k,U as N,a6 as C,a7 as q,a8 as j,a9 as _,aa as I,B as O,o as T,f as P,g as B,j as F,n as L,T as M,O as R,A as $,ab as z,I as A,ac as D,ad as H,L as G,ae as K,af as V,p as W,d as U,q as J,ag as Q,ah as X}from"./vendor.05a31967.js";var Y=[{id:"4de5457415f1429ea318f8b112a59a6c",name:"谷歌",value:"google",href:"https://www.google.com/search?q=",sugurl:"https://suggestqueries.google.com/complete/search?client=youtube&q=#content#&jsonp=window.google.ac.h",icon:"./img/engineLogo/google.ico",isShow:!0,selected:!1},{id:"3176606942b5445a913c099aeac9ddb0",name:"必应",value:"bing",href:"https://cn.bing.com/search?q=",sugurl:"https://api.bing.com/qsonhs.aspx?type=cb&q=#content#&cb=window.bing.sug",icon:"./img/engineLogo/bing.ico",isShow:!0,selected:!0},{id:"755551cec9054314a50e74ac9130c34b",name:"百度",value:"baidu",href:"https://www.baidu.com/s?wd=",sugurl:"https://suggestion.baidu.com/su?wd=#content#&cb=window.baidu.sug",icon:"./img/engineLogo/baidu.svg",isShow:!0,selected:!1},{id:"e9275210f149443b9d554a59861887c8",name:"搜狗",value:"sougou",href:"https://www.sogou.com/web?query=",sugurl:"https://www.sogou.com/suggnew/ajajjson?type=web&key=#content#",icon:"./img/engineLogo/sougou.ico",isShow:!0,selected:!1},{id:"ee4b853b01cd4c9bb3fdcb814c13b298",name:"好搜",value:"好搜",href:"https://www.so.com/s?ie=utf-8&fr=hao_360so&src=home_hao_360so&q=",sugurl:"https://sug.so.360.cn/suggest?encodein=utf-8&encodeout=utf-8&format=json&word=#content#&callback=window.so.sug",icon:"./img/engineLogo/so360.ico",isShow:!0,selected:!1},{id:"db34d1185cdf42339f17dd34f25b897b",name:"Magi",value:"magi",href:"https://magi.com/search?q=",sugurl:"https://magi.com/suggest?size=8&q=#content#&callback=window.magi.sug",icon:"./img/engineLogo/magi.png",isShow:!0,selected:!1},{id:"ace54031b5bb4b4693e4ffc4cc304199",name:"夸克",value:"quark",href:"https://quark.sm.cn/s?q=",sugurl:"https://quark.sm.cn/api/quark_sug?q=#content#&callback=window.quark.sug",icon:"./img/engineLogo/quark.ico",isShow:!0,selected:!1}];const Z=({onChange:e})=>{const[t,a]=v.useState([]),[n,r]=v.useState({}),o=()=>{new Promise((e=>{e({code:200,msg:"获取成功",data:Y})})).then((t=>{if(a(t.data),0===t.data.length)return;const n=localStorage.getItem("engine_id");if(n){const a=t.data.find((e=>e.id===n));r(a||t.data[0]),e&&e(a||t.data[0])}else r(t.data[0]),e&&e(t.data[0])}))};return v.useEffect((()=>{o()}),[]),v.createElement("div",{className:"w-full text-left mb-1 flex justify-start items-center overflow-x-auto"},t.map((t=>v.createElement(w,{key:t.id,className:x("mx-1",t.id===n.id?"bg-primary text-white":"bg-gray-100"),size:"small",label:t.name,onClick:a=>{return n=t,localStorage.setItem("engine_id",n.id),r(n),void(e&&e(n));var n}}))))};const ee=e=>{var t=e,{open:a,anchorEl:n,wd:r,onSelect:o}=t;i(t,["open","anchorEl","wd","onSelect"]);const[l,m]=v.useState([]),[d,g]=v.useState({}),[p,f]=v.useState(!1),E=function(e,t=300,a=[]){const{current:n}=y.exports.useRef({fn:e,timer:void 0});return y.exports.useEffect((function(){n.fn=e}),[e]),y.exports.useCallback((function(...e){n.timer&&clearTimeout(n.timer),n.timer=setTimeout((()=>{n.fn(...e)}),t)}),a)}((function(){h()}),300),h=()=>{r?(f(!0),(e=>u.get("/v1/resource/baidu/sug",{params:{wd:e}}))(r).then((e=>{let t=e.data.data;m(t.sugs),g(t.engine),f(!1)}))):m([])};return v.useEffect((()=>{E()}),[r]),v.createElement(S,{open:a&&r.length>0,anchorEl:n,transition:!0,placement:"bottom",container:n,className:"z-10 top-auto left-auto"},(({TransitionProps:e})=>v.createElement(k,c(s({},e),{className:"mt-1",style:{width:`${null==n?void 0:n.clientWidth}px`}}),v.createElement(N,{spinning:p,indicator:v.createElement(C,{spin:!0})},l.length?v.createElement(v.Fragment,null,v.createElement(q,{disablePadding:!0},l.map(((e,t)=>v.createElement(j,{button:!0,key:t,onClick:()=>{o(e.content)}},e.content)))),v.createElement("p",{className:"px-5 py-2 text-right"},"数据来源：",d.name)):v.createElement(_,{image:_.PRESENTED_IMAGE_SIMPLE})))))},te=e=>{var t=e,{onChange:a,onPressEnter:n,onBtnClick:r,onFocus:o,onBlur:l,value:c,defaultValue:u,primaryText:m}=t,d=i(t,["onChange","onPressEnter","onBtnClick","onFocus","onBlur","value","defaultValue","primaryText"]);const{t:g,i18n:p}=I(),[f,E]=v.useState(u||c||""),[h,b]=v.useState({}),[w,x]=v.useState(!1),[y,S]=v.useState(""),[k,N]=v.useState(null);return v.createElement("div",{className:"search-input max-w-2xl w-4/5",onFocus:e=>{x(!0),N(e.currentTarget)},onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||x(!1)}},v.createElement(Z,{onChange:e=>{b(e)}}),v.createElement("div",{className:"flex justify-center items-center rounded-md shadow-xl overflow-hidden"},v.createElement("input",s({className:"py-2 px-4 border-none leading-4 sm:leading-7 outline-none flex-grow rounded-tr-none rounded-br-none placeholder-gray-400 focus:placeholder-gray-200 transition-all",type:"text",value:f,onChange:e=>{E(e.target.value),S(e.target.value),a&&a(e,e.target.value,h)},onFocus:e=>{o&&o(e)},onBlur:e=>{l&&l(e)},onKeyDown:e=>{"Enter"===e.code&&n&&n(f,h)}},d)),v.createElement(O,{className:"w-16 sm:w-24 rounded-tl-none px-2 sm:px-4 leading-4 sm:leading-7 text-center tracking-widest rounded-bl-none bg-primary text-white",size:"large",variant:"contained",disableElevation:!0,onClick:()=>{r&&r(f,h)}},g("sou-suo"))),v.createElement(ee,{open:w,wd:y,anchorEl:k,onSelect:e=>{r&&r(e,h)}}))},ae=({open:e,type:t,value:a,onClose:n,onSubmit:r})=>{const{handleSubmit:o,control:l,reset:s}=T(),c=({id:e,items:t=[{name:"name",label:"名称",placeholder:"请输入名称",rules:{required:{value:!0,message:"请输入名称"}}},{name:"url",label:"网址",placeholder:"请输入网址",rules:{required:{value:!0,message:"请输入网址"},pattern:{value:/^(((ht|f)tps?):\/\/)?[\w-]+(\.[\w-]+)+([\w.,@?^=%&:/~+#-]*[\w@?^=%&/~+#-])?$/,message:"网址格式不正确"}}}],submit:a})=>v.createElement("form",{id:e,onSubmit:o(a)},t.map(((e,t)=>v.createElement(L,{key:t,control:l,name:e.name,rules:e.rules,render:({field:{onChange:t,ref:a},fieldState:{error:n}})=>v.createElement(M,{inputRef:a,onChange:t,variant:"outlined",fullWidth:!0,size:"small",autoComplete:"off",error:!!n,style:{margin:"8px 0"},label:e.label,placeholder:e.placeholder,helperText:n?n.message:null})})))),i=e=>{"del"===t&&a&&(e=a),r(e)},u=()=>{n(),s()};return v.useEffect((()=>{s(a)}),[a]),v.createElement(P,{className:"top-site-dialog",open:e,onClose:u},v.createElement(m,{onClose:n},"add"===t&&"添加网址","edit"===t&&"编辑网址"),v.createElement(B,null,"add"===t&&v.createElement(c,{id:"SiteForm",submit:i}),"edit"===t&&v.createElement(c,{id:"SiteForm",submit:i})),v.createElement(F,{className:"pt-2 px-4 pb-4"},v.createElement(O,{disableElevation:!0,variant:"contained",onClick:u},"取消"),v.createElement(O,{form:"SiteForm",disableElevation:!0,variant:"contained",color:"primary",type:"submit"},"确认")))},ne=({type:e="view",item:t,onClick:a,onAdd:n,onEdit:r,onRemove:o})=>{const[l,s]=v.useState(null);return v.createElement(v.Fragment,null,v.createElement("div",{className:x("cursor-pointer bg-transparent rounded shadow-none relative w-28 h-20 transition-all hover:bg-rgba-gray-3",R`
            &:hover {
              .handle-container {
                opacity: 1 !important;
              }
            }
          `),onClick:a},v.createElement("div",{className:x(["content-container transition-all box-border flex flex-col items-center w-full h-full px-3 py-2 rounded","add"===e?"justify-start text-primary":"justify-end"])},v.createElement($,{className:x("bg-white rounded mx-auto",{"text-primary":"add"===e},R`
                img {
                  max-width: 24px;
                  height: 24px;
                }
              `),variant:"rounded",src:d(null==t?void 0:t.url),onClick:n||void 0},"add"===e&&v.createElement(z,null)),v.createElement("p",{className:"text-center flex justify-center mt-1 w-full text-var-main-10"},v.createElement("a",{className:"overflow-hidden overflow-ellipsis"},null==t?void 0:t.name))),"view"===e&&v.createElement("span",{className:"handle-container w-6 h-6 flex justify-center absolute top-1 right-1 z-10 opacity-0 transition-all"},v.createElement(A,{className:"rounded",size:"small","aria-controls":`site-${null==t?void 0:t.name}-menu`,"aria-haspopup":"true",onClick:e=>{e.stopPropagation(),s(e.currentTarget)}},v.createElement(D,{className:"text-var-main-10"})))),v.createElement(H,{id:`site-${null==t?void 0:t.name}-menu`,open:Boolean(l),anchorEl:l,onClose:e=>{e.stopPropagation(),s(null)}},v.createElement(G,{onClick:()=>{r&&t&&r(t)}},v.createElement(K,null)," 修改"),v.createElement(G,{onClick:()=>{o&&t&&o(t._id)}},v.createElement(V,null),"删除")))},re=new g({storage:localStorage,database:"database"}).get("site"),oe=e=>{const[t,a]=v.useState(!1),[n,r]=v.useState("add"),[o,l]=v.useState({}),[i,u]=v.useState(!1),[m,d]=v.useState(""),[g,E]=v.useState([]),h=()=>{const e=(()=>{const e=localStorage.getItem("account");return re.find({userId:{$eq:e}},{sort:{count:-1}})})();E(e)},b=e=>{(e=>{const t=re.findOne(e);re.update(e,c(s({},t),{count:t.count+1}))})(e._id),window.open(f(e.url)),h()},w=e=>{r("edit"),l(e),a(!0)},x=e=>{d(e),u(!0)},y=()=>{a(!1),h(),l({_id:"",name:"",url:"",count:0})};return v.useEffect((()=>{h()}),[]),v.createElement(v.Fragment,null,v.createElement("div",{className:"flex justify-center items-center gap-2 h-full"},g.map((e=>v.createElement(ne,{key:e._id,item:e,onClick:()=>b(e),onEdit:w,onRemove:x}))),v.createElement(ne,{type:"add",onAdd:()=>{r("add"),a(!0)}})),v.createElement(ae,{open:t,type:n,value:o,onSubmit:e=>{if("add"===n){(e=>{const t=localStorage.getItem("account");return re.inset(c(s({},e),{count:0,userId:t}))})(e)?(W.success("添加成功"),y()):W.error("添加失败")}if("edit"===n){(t=o._id,a=e,re.update(t,a))?(W.success("修改成功"),y()):W.error("修改失败")}var t,a},onClose:y}),v.createElement(p,{title:"删除",type:"warning",content:"是否删除此网址",open:i,onOk:()=>{(e=>{const t=re.find(e),a=re.remove(e);return sessionStorage.setItem("site-repeal",JSON.stringify(t)),a})(m)?(u(!1),h(),W.success("删除成功")):W.error("删除成功")},onCancel:()=>u(!1)}))},le={THEME_LIGHT:"light",THEME_DARK:"dark",THEME_INVERSE:"inverse"},se=(e,t=le.THEME_ON_BACKGROUND)=>{const a=document.getElementById("root");e&&a?a.className=t:!e&&a&&(a.className="")};const ce=({value:e=0})=>{const[t,a]=v.useState([!1,!1,!1,!1,!1,!1,!1]),n=[[0,1,2,3,4,5],[1,2],[0,1,6,4,3],[0,1,6,2,3],[5,6,1,2],[0,5,6,2,3],[0,5,4,3,2,6],[0,1,2],[0,1,2,3,4,5,6],[0,1,6,2,5]];return v.useEffect((()=>{(()=>{let r=t.map((()=>!1));n[e].forEach((e=>{r[e]=!0})),a(r)})()}),[e]),v.createElement("div",{className:"digit"},t.map(((e,t)=>v.createElement("div",{className:x("segment",{on:e}),key:t}))))},ie=()=>v.createElement("div",{className:"separator-box"},v.createElement("div",{className:"separator"}),v.createElement("div",{className:"separator"})),ue=()=>{const[e,t]=v.useState(0),[a,n]=v.useState(0),[r,o]=v.useState(0),l=()=>{let e=U();t(e.hour()),n(e.minute()),o(e.second())};return v.useEffect((()=>{const e=setInterval(l,1e3);return()=>{clearInterval(e)}}),[]),v.createElement("div",{className:"digital-clock-root"},v.createElement(ce,{value:Math.floor(e/10)}),v.createElement(ce,{value:e%10}),v.createElement(ie,null),v.createElement(ce,{value:Math.floor(a/10)}),v.createElement(ce,{value:a%10}),v.createElement(ie,null),v.createElement(ce,{value:Math.floor(r/10)}),v.createElement(ce,{value:r%10}))},me=e=>{var t=e,{history:a}=t;i(t,["history"]);const{t:n,i18n:r}=I(),[o,l]=v.useState(),s=(e,t)=>{window.open(`${t.href}${e}`)};return v.useEffect((()=>{(()=>{const e=h(),t=e.background;if(e&&t)switch(t.type){case"random":se(!0,"inverse"),l(e.background.data);break;case"everyday":se(!0,"inverse"),b().then((e=>{l(e.data.data[0])}));break;case"link":se(!0,"inverse"),l(e.background.data);break;case"color":se(!1)}})()}),[]),v.createElement("div",{className:"index-page flex flex-col h-screen bg-cover bg-center bg-secondary",style:{backgroundImage:o?`url('${null==o?void 0:o.url}')`:void 0}},v.createElement("div",{className:"index-navbar-box flex-grow max-h-12 text-right align-middle"},v.createElement(J,{title:"网址导航"},v.createElement(A,{onClick:()=>a.push("/navigation")},v.createElement(Q,{className:x({"text-var-main-10":!!o})}))),v.createElement(J,{title:"设置"},v.createElement(A,{onClick:()=>a.push("/setting")},v.createElement(X,{className:x({"text-var-main-10":!!o})})))),v.createElement("div",{className:"index-logo-box flex-grow max-h-48 sm:max-h-72 items-center flex justify-center"},v.createElement(ue,null)),v.createElement("div",{className:"index-input-box flex-grow max-h-20 flex justify-center items-center"},v.createElement(te,{placeholder:n("placeholder.qing-shu-ru-sou-suo-nei-rong"),onPressEnter:s,onBtnClick:s})),v.createElement("div",{className:"index-content-box flex-grow"},v.createElement(oe,null)),v.createElement("div",{className:"index-copyright-box flex-grow max-h-8 text-center leading-8"},v.createElement(E,null)))};export{me as default};
